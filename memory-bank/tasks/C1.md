# C1: Numerical Simulations for QC-Diffusion Paper Concepts
*Created: 2025-08-19 15:41:15 IST*
*Last Updated: 2025-08-20 10:43:45 IST*

**Description**: Create comprehensive numerical simulations to illustrate key concepts from the Wheeler-DeWitt diffusion paper, including telegraph vs standard diffusion, Bianchi model behavior, random walk processes, and spin network diffusion

**Status**: ðŸ”„ IN PROGRESS
**Priority**: HIGH
**Started**: 2025-08-19 15:41:15 IST
**Last Active**: 2025-08-20 10:43:45 IST
**Dependencies**: -

## Completion Criteria
- âœ… Telegraph equation vs standard diffusion comparison simulation (enhanced with time controls and reset)
- âœ… Multi-equation selection system with organized UI  
- âœ… Telegraph equation stability fixes and conservation monitoring
- â¬œ Wheeler-DeWitt equation numerical integration for Bianchi I and IX models
- â¬œ Random walk derivation of telegraph equation visualization
- â¬œ Basic spin network diffusion model implementation
- â¬œ Interactive visualization tools for paper concepts
- â¬œ Parameter studies showing factor ordering effects
- â¬œ Documentation and example scripts

## Related Files
- `frontend/src/Controls.tsx` - Equation selection with organized parameter groups
- `frontend/src/types.ts` - Dynamic equation type system with metadata
- `frontend/src/hooks/useWebGLSolver.ts` - Multi-solver parallel execution
- `frontend/src/webgl/webgl-solver.js` - Fixed telegraph equation implementation with proper physics
- `frontend/src/PlotComponent.tsx` - Dynamic trace generation with conservation monitoring
- `frontend/src/utils/initialConditions.ts` - Backend-agnostic initial conditions
- `frontend/src/utils/conservationMonitor.ts` - Real-time conservation quantity tracking
- `frontend/src/ConservationDisplay.tsx` - Conservation monitoring UI component
- `frontend/src/BottomControls.tsx` - Simulation controls positioned below plot
- `frontend/src/App.tsx` - Dynamic equation result handling

## Progress
1. âœ… Set up simulation framework and directory structure
2. âœ… Implement telegraph equation solver using py-pde
3. âœ… Implement standard diffusion equation solver using py-pde
4. âœ… Create comparison visualizations with Plotly.js
5. âœ… Add interactive parameter controls (distribution, domain, mesh)
6. âœ… Implement real-time plot updates and animation framework
7. âœ… Add time controls (dt, t_range) and reset functionality
8. âœ… Multi-equation selection system with organized UI
9. âœ… Fix telegraph equation numerical instability and implement conservation monitoring
10. â¬œ Implement Wheeler-DeWitt equation for Bianchi models
10. â¬œ Create random walk simulation
11. â¬œ Develop spin network diffusion model

## Context
Development of numerical tools to demonstrate theoretical connections between quantum gravity, diffusion processes, and stochastic mechanics.

**Phase 4 COMPLETED**: Multi-equation selection system with organized UI
- Equation selection checkboxes grouped with respective parameters
- Conditional parameter display (only show when equation selected)
- Dynamic type system supporting any combination of equations
- Multi-solver parallel execution for selected equations
- Dynamic trace generation with automatic colors and legends
- Extensible architecture ready for Wheeler-DeWitt implementation

**UI Improvements**:
- Organized sections: Equations, Initial Conditions, Simulation Settings, Solver Type, Controls
- Parameters grouped under their equations (Telegraph: collision rate, velocity; Diffusion: diffusivity)
- Visual hierarchy with sectioned white cards and borders
- Enhanced button styling and typography

**Technical Architecture**:
- Map-based multi-solver system for parallel equation execution
- Dynamic AnimationFrame and SimulationResult types
- Equation metadata system with colors and parameter mappings
- Backend-agnostic initial condition generation
- Shared initial distribution across all selected equations

**Phase 5 COMPLETED**: Telegraph equation stability and conservation monitoring
- Fixed numerical instability in telegraph equation WebGL shader
- Corrected telegraph equation to proper first-order system: du/dt = w, dw/dt = vÂ²âˆ‡Â²u - 2aw  
- Implemented comprehensive conservation monitoring system
- Real-time tracking of mass conservation (both equations) and energy conservation (telegraph)
- Added conservation error monitoring with stability indicators
- Enhanced WebGL solver to extract both u and w fields for proper energy calculation
- Reorganized UI layout with controls positioned directly below plot for better usability

**Technical Improvements**:
- Fixed telegraph equation shader with correct velocity parameter v in Laplacian term
- Added velocity field w extraction from WebGL texture green channel
- Implemented proper energy conservation E = âˆ«[Â½wÂ² + Â½vÂ²(âˆ‚u/âˆ‚x)Â²]dx
- Added momentum conservation tracking âˆ«w dx
- Created ConservationMonitor class with trapezoidal integration and error tracking
- Real-time stability assessment with configurable tolerance thresholds

**UI Enhancements**:
- Moved solver type and simulation controls below the plot for better accessibility  
- Added conservation quantities display panel with mass/energy error tracking
- Stability indicator showing green/red status based on conservation errors
- Enhanced layout prevents conservation monitoring during initial condition setup

**Ready for Phase 6**: Wheeler-DeWitt equation implementation with established conservation monitoring framework.
