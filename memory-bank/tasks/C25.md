# Task: C25
*Created: 2026-01-12 16:54:42 IST*
*Last Updated: 2026-01-12 17:01:21 IST*

## Task Information
**Title:** Random Walk Page Architecture Review and Fix
**Status:** üîÑ Active
**Priority:** HIGH
**Created:** 2026-01-12 16:54:42 IST
**Started:** 2026-01-12 17:01:21 IST
**Completed:**

## Description
Systematic architecture review identifying 31 issues (3 critical, 12 high, 13 medium, 3 low) in Random Walk simulation page. Fixes enable broken features and improve code quality.

## Acceptance Criteria
- [ ] All 3 critical bugs fixed (P3-006, P1-011, P1-007)
- [ ] Type safety improved (no `any` casts)
- [ ] All tests pass
- [ ] Performance verified
- [ ] Documentation updated

## Implementation Details

## Subtasks

### C25a: Fix Critical Bugs (Blocking)
**Status**: üìù PLANNED | **Priority**: CRITICAL
- **P3-006**: Graph physics frozen on GPU mode (4-6h)
- **P1-011**: ReplayControls hardcoded data (4-6h)
- **P1-007**: Animation startup race condition (2-3h)
**Files**: useParticlesLoader.ts, RandomWalkSim.tsx, useRandomWalkControls.ts

### C25b: Type Safety Improvements
**Status**: üìù PLANNED | **Priority**: HIGH
- **P6-001**: Add ParticlesLoader interface (2-3h)
- **P6-002**: Remove 7 `any` type casts (2-3h)
**Files**: useParticlesLoader.ts, useRandomWalkControls.ts, RandomWalkSim.tsx

### C25c: Dependency and State Fixes
**Status**: üìù PLANNED | **Priority**: HIGH
- **P1-001**: Add useGPU dependency (0.5h)
- **P5-002**: Fix GPU mode switching (0.5h)
- **P1-008**: Consolidate isRunning state (4-6h)
**Files**: useRandomWalkEngine.ts, RandomWalkSim.tsx

### C25d: Architecture Refactoring (Long-term)
**Status**: üìù PLANNED | **Priority**: MEDIUM
- **P7-001/P7-002**: Split useParticlesLoader (8-10h)
- **P7-003**: Consolidate state management (6-8h)
**Files**: useParticlesLoader.ts, RandomWalkSim.tsx

## Timeline
- **Week 1**: C25a + C25b (20-22 hours)
- **Week 2**: C25c (5-7 hours)
- **Week 3-4**: C25d (14-18 hours)
- **Total**: 40-50 hours

## Review Location
All findings: `implementation-docs/random-walk-review/`
- **Start**: REVIEW-INDEX.md
- **Summary**: review-summary.md
- **Details**: review-findings.md
- **Implementation**: review-action-items.md

## Success Criteria
- All 3 critical bugs fixed
- Type safety improved (no `any` casts)
- All tests pass
- Performance verified

## Related Files
- `frontend/src/RandomWalkSim.tsx`: Main simulation component
- `frontend/src/components/ExportPanel.tsx`: Export functionality
- `frontend/src/components/ReplayControls.tsx`: Replay controls
- `frontend/src/gpu/GPUParticleManager.ts`: GPU particle management
- `frontend/src/hooks/useParticlesLoader.ts`: Particle loading hook
- `frontend/src/hooks/useRandomWalkControls.ts`: Random walk controls
- `frontend/src/hooks/useRandomWalkEngine.ts`: Random walk engine
- `frontend/src/physics/PhysicsRandomWalk.ts`: Physics calculations
- `frontend/src/physics/core/CoordinateSystem.ts`: Coordinate system
- `implementation-docs/random-walk-review/`: Review documentation

## Dependencies
- **Depends On:** C5b, C5c, C16b
- **Blocks:** 

## Progress Tracking
- 2026-01-12 16:54:42 IST: Task created with architecture review findings
- 2026-01-12 17:01:21 IST: Task file updated to follow template format

## Issues and Blockers
- None currently identified

## Notes
- Critical to fix blocking bugs before proceeding with other features
- Timeline estimated at 40-50 hours total across all subtasks

## Related Resources
- implementation-docs/random-walk-review/REVIEW-INDEX.md
- implementation-docs/random-walk-review/review-summary.md
- implementation-docs/random-walk-review/review-findings.md
- implementation-docs/random-walk-review/review-action-items.md
