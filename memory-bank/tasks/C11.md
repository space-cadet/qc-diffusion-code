# C11: PDE Solver Choice Implementation
*Created: 2025-08-25 03:43:52 IST*
*Last Updated: 2025-08-25 03:43:52 IST*

**Description**: Implement Crank-Nicolson and RK4 solvers to address diffusion equation stability issues, with per-equation solver selection UI
**Status**: ðŸ”„ IN PROGRESS **Last**: 2025-08-25 03:43:52 IST
**Priority**: HIGH
**Started**: 2025-08-25 03:43:52 IST
**Dependencies**: C1, C2

## Completion Criteria
- [x] Strategy pattern infrastructure setup (BaseSolver, ForwardEulerSolver)
- [ ] Crank-Nicolson solver implementation for diffusion stability
- [ ] RK4 solver implementation for telegraph equation accuracy  
- [ ] Per-equation solver selection UI in PdeParameterPanel
- [ ] Solver validation and stability checking
- [ ] Integration with existing WebGL pipeline

## Related Files
- `frontend/src/webgl/solvers/BaseSolver.ts`
- `frontend/src/webgl/solvers/ForwardEulerSolver.ts`
- `frontend/src/webgl/solvers/CrankNicolsonSolver.ts` (planned)
- `frontend/src/webgl/solvers/RK4Solver.ts` (planned)
- `frontend/src/webgl/webgl-solver.js`
- `frontend/src/PdeParameterPanel.tsx`
- `frontend/src/types.ts`

## Progress
1. âœ… Strategy pattern infrastructure setup
2. âœ… ForwardEulerSolver strategy implementation
3. âœ… WebGLSolver strategy integration
4. âœ… SolverConfig type definitions
5. ðŸ”„ Crank-Nicolson solver implementation
6. â¬œ RK4 solver implementation
7. â¬œ Per-equation solver selection UI
8. â¬œ Solver validation and stability checking

## Context
Diffusion equation exhibits oscillatory instabilities with Forward Euler (as seen in comparison images). Strategy pattern infrastructure now established to support multiple numerical methods per equation type. Crank-Nicolson provides unconditional stability for diffusion, while RK4 improves accuracy for telegraph equation.

## Technical Notes
- Infrastructure uses Strategy pattern with SolverStrategy interface
- Each solver encapsulates shader generation and stepping logic
- WebGLSolver delegates to current solver strategy
- Per-equation solver configuration stored in SimulationParams.solver_config
- Maintains existing texture ping-pong architecture for explicit methods
